import{j as e,C as t,F as n}from"./.pnpm-DqyT9PNa.js";function i(){return e.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function l(){return e.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const a={colorSketch:"_colorSketch_113k5_1",dropDown:"_dropDown_113k5_10",items:"_items_113k5_14",item:"_item_113k5_14",input:"_input_113k5_51",prefix:"_prefix_113k5_58",suffix:"_suffix_113k5_63",panel:"_panel_113k5_81",header:"_header_113k5_86",icon:"_icon_113k5_93",title:"_title_113k5_99",active:"_active_113k5_117",wrap:"_wrap_113k5_120",panelContent:"_panelContent_113k5_124",panelItem:"_panelItem_113k5_130",select:"_select_113k5_149",value:"_value_113k5_164",color:"_color_113k5_1",block:"_block_113k5_194"};function r({defaultValue:t,onChange:n,value:i,prefix:l,prefixTip:r,suffix:o,style:s={},disabled:c=!1,onFocus:d=()=>{},onKeyDown:_=()=>{},onBlur:u=()=>{},tip:g,numberTip:f,type:h}){const[m,v]=React.useState(t),x=React.useCallback((e=>{const t=e.target.value;v(t),null==n||n(t)}),[]);return React.useEffect((()=>{i!==m&&v(i)}),[i]),e.jsx(p.Item,{style:s,children:e.jsxs("div",{className:a.input,"data-mybricks-tip":g,children:[l&&e.jsx("div",{className:a.prefix,"data-mybricks-tip":r,children:l}),e.jsx("input",{defaultValue:m,onChange:x,disabled:c,onFocus:d,onBlur:u,onKeyDown:_,"data-mybricks-tip":f,type:h}),o&&e.jsx("div",{className:a.suffix,children:o})]})})}function o({value:n,onChange:i,disabled:l,style:o}){const c=React.useRef(null),_=React.useRef(null),[u,p]=React.useState(!1),[g,f]=React.useState(!1),h=React.useCallback((()=>{l||(p(!0),f(!0))}),[l]),m=React.useCallback(((e,t)=>{var n;"#ffffff00"!==e.hexa&&9===(null==(n=e.hexa)?void 0:n.length)&&(null==e?void 0:e.hex)!==(null==t?void 0:t.hex)&&"0"===e.hexa[e.hexa.length-1]&&(e.hexa=e.hexa.replace(/00$/,"FF")),i(d(e.hexa))}),[]),v=React.useCallback((e=>{_.current.contains(e.target)||f(!1)}),[]);return React.useEffect((()=>{g?setTimeout((()=>{document.addEventListener("click",v)})):document.removeEventListener("click",v)}),[g]),React.useEffect((()=>()=>{document.removeEventListener("click",v)}),[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:c,className:a.color,style:o,children:[e.jsx("div",{onClick:h,className:a.block,style:{background:0!==new t(n).alpha()?n:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAADFJREFUOE9jZGBgEGHAD97gk2YcNYBhmIQBgWSAP52AwoAQwJvQRg1gACckQoC2gQgAIF8IscwEtKYAAAAASUVORK5CYII=") left center, white'}}),e.jsx(r,{defaultValue:String(t(n).hex()).toUpperCase(),onChange:e=>{i(d(e))}})]}),u&&ReactDOM.createPortal(e.jsx(s,{value:n,onChange:m,open:g,positionElement:c.current,childRef:_}),document.body)]})}function s({open:t,positionElement:i,onChange:l,value:r,childRef:o}){const s=o;React.useEffect((()=>{const e=s.current;if(t){const t=i.getBoundingClientRect(),n=s.current.getBoundingClientRect(),l=window.innerHeight||document.documentElement.clientHeight,a=t.top+t.height,r=t.left+t.width-n.width,o=a+n.height;e.style.top=o>l?t.top-n.height+"px":a+"px",e.style.left=r+"px",e.style.visibility="visible"}else e.style.visibility="hidden"}),[t]);const d=React.useCallback((()=>{try{return c(r)}catch{return"rgba(0, 0, 0, 1)"}}),[r]);return e.jsx("div",{ref:s,className:a.colorSketch,children:e.jsx(n,{color:d(),onChange:l})})}const c=e=>{const{color:n,valpha:i}=t.rgb(e);return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${i.toFixed(2)})`},d=e=>{if(e.startsWith("rgba"))return e;if(e.startsWith("rgb"))return e.replace("rgb","rgba").replace(")",",1)");if(e.startsWith("#")){const t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);let l=1;return 9===e.length&&(l=Number((parseInt(e.slice(7,9),16)/255).toFixed(2))),`rgba(${t},${n},${i},${l})`}return e};function _({value:t,options:n,children:i,onClick:l,className:r,multiple:o}){const s=React.useRef(null),c=React.useRef(null),[d,_]=React.useState(!1),[p,g]=React.useState(!1),f=React.useCallback((()=>{_(!0),g(!0)}),[]),h=React.useCallback((e=>{l(e)}),[]),m=React.useCallback((e=>{if(o){let t=e.target;for(;t;){if(t===c.current)return;t=t.parentElement}g(!1)}else g(!1)}),[]);return React.useEffect((()=>(p?setTimeout((()=>{document.addEventListener("click",m)})):document.removeEventListener("click",m),()=>{document.removeEventListener("click",m)})),[p]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:s,className:`${a.dropDown}${r?` ${r}`:""}`,onClick:f,children:i}),d&&ReactDOM.createPortal(e.jsx(u,{ref:c,value:t,options:n,positionElement:s.current,open:p,onClick:h}),document.body)]})}const u=React.forwardRef(((t,n)=>{const{open:l,options:r,positionElement:o,onClick:s,value:c}=t,d=React.useRef(null);return React.useImperativeHandle(n,(()=>d.current)),React.useEffect((()=>{const e=d.current;if(l&&e){const t=o.getBoundingClientRect(),n=d.current.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,l=t.top+t.height,a=t.left+t.width-t.width,r=l+n.height;e.style.top=r>i?t.top-n.height+"px":l+"px",n.width>t.width?e.style.left=a-n.width+t.width+"px":(e.style.width=t.width+"px",e.style.left=a+"px"),e.style.visibility="visible"}else e.style.visibility="hidden"}),[l,d.current]),e.jsx("div",{ref:d,className:a.items,children:r.map((({label:t,value:n},l)=>e.jsxs("div",{className:a.item,onClick:()=>s(n),children:[n===c||Array.isArray(c)&&c.includes(n)?e.jsx(i,{}):e.jsx(e.Fragment,{}),t]},l)))})}));function p({title:t,children:n,showTitle:i=!0}){return e.jsxs("div",{className:a.panel,children:[e.jsx("div",{className:a.header,children:i&&e.jsx("div",{className:a.title,children:t})}),e.jsx("div",{className:a.wrap,children:n})]})}function g(e,t=[]){if(!Array.isArray(t)||!t.length)return;const n=React.useRef(!1);React.useEffect((()=>{n.current?e():n.current=!0}),t)}function f(e,t){const[n,i]=React.useState(function(e){const t=parseFloat(e);return!isNaN(t)&&t>0?String(t):"0"}(e)),l=function(e){const t=React.useRef(e);return t.current=e,t}(t);return[n,React.useCallback((e=>{var t;let n;if(e){const t=parseFloat(e);!isNaN(t)&&t>=0&&(n=/^(0|[1-9]\d*)?(\.\d*)?$/.test(e)?e:String(t))}else n="0";n&&(i(n),null==(t=l.current)||t.call(l,n))}),[])]}function h({value:t,prefix:n,defaultValue:i,style:r={},onChange:o,options:s,showIcon:c=!0,labelClassName:d,multiple:u=!1,tip:f}){var h;const[m,v]=React.useState(t||i),[x,w]=React.useState(Array.isArray(m)?m.map((e=>{var t;return null==(t=s.find((({value:t})=>t===e)))?void 0:t.label})).join(","):(null==(h=s.find((({value:e})=>e===m)))?void 0:h.label)||m),C=React.useCallback((e=>{v((t=>{if(u){const n=Array.isArray(t)?t.slice():[t],i=n.indexOf(e);return i>-1?n.splice(i,1):n.push(e),w(n.map((e=>s.find((({value:t})=>t===e)).label)).join(",")),o(n),n}return t!==e&&(w(s.find((({value:t})=>t===e)).label),o(e)),e}))}),[]);return g((()=>{v(t)}),[t]),React.useEffect((()=>{var e;w(Array.isArray(t)?t.map((e=>{var t;return null==(t=s.find((({value:t})=>t===e)))?void 0:t.label})).join(","):(null==(e=s.find((({value:e})=>e===m)))?void 0:e.label)||m)}),[m]),e.jsx(p.Item,{style:r,children:e.jsx(_,{multiple:u,options:s,value:m,onClick:C,children:e.jsxs("div",{"data-mybricks-tip":f,className:a.select,style:c?{}:{padding:0},children:[n&&e.jsx("div",{className:a.prefix,children:n}),e.jsx("div",{className:`${a.value}${d?` ${d}`:""}`,children:x}),c&&e.jsx("span",{className:a.icon,children:e.jsx(l,{})})]})})})}function m({defaultValue:t,onChange:n,value:i,prefix:l,prefixTip:a,suffix:o,style:s={},disabled:c=!1,unitOptions:d,unitDisabledList:_=[],defaultUnitValue:u,onFocus:p,tip:m,allowNegative:x=!1,showIcon:w=!1,type:C}){const[b,R]=React.useState(v(i||t,u,d)),[k,y]=f(i||t),[j,A]=React.useState(void 0!==b&&void 0!==(i||t)&&b===(i||t)?b:k),S=React.useCallback((()=>_&&b?_.includes(b):c),[b,c]),q=React.useCallback((e=>{const t=e.code,n=function(e,t){if(e.includes(".")){var n=e.split(".")[1].length,i=Math.pow(10,-n);if("ArrowUp"===t)var l=(parseFloat(e)+i).toFixed(n);else if("ArrowDown"===t)l=(parseFloat(e)-i).toFixed(n);else l=e}else if("ArrowUp"===t)l=(parseFloat(e)+1).toString();else if("ArrowDown"===t)l=(parseFloat(e)-1).toString();else l=e;return Number(l)>0?l:"0"}(e.target.value,t);["ArrowUp","ArrowDown"].includes(t)?(e.target.value=n,e.target.select(),e.preventDefault()):"Enter"===t&&(e.target.value=n,y(n))}),[k]),I=React.useCallback((e=>{let t=e.target.value;t=Number(t)>0?t:"0",y(t),e.target.value=t}),[k]),N=React.useMemo((()=>o||(Array.isArray(d)?e.jsx(h,{style:{padding:0,fontSize:10},defaultValue:b,options:d,showIcon:w,onChange:R}):null)),[]);return g((()=>{if(i){const e=v(i,u,d);R(e),y(String(i)),A(void 0!==e&&void 0!==i&&e===i?e:k)}}),[i]),g((()=>{let e=String(parseFloat(k));_.includes(b)?(A(b),e=b):(A(k),e+=b),n&&n(e)}),[b,k]),e.jsx(r,{style:s,prefix:l,prefixTip:a,value:j,suffix:N,disabled:S(),onFocus:p,onKeyDown:q,onBlur:I,tip:m,numberTip:"光标键可增减",type:C})}function v(e,t=void 0,n=[]){const[,i]=function(e){if("number"==typeof e)return isNaN(e)?[String(e),null]:[null,null];let t=parseFloat(e);return isNaN(t)?[null,null]:(t=String(t),[t,e.replace(t,"")])}(e),l=n.find((e=>e.value===i));return l?l.value:i||(void 0!==t?t:e)}p.Content=function({style:t={},children:n,className:i}){return e.jsx("div",{className:`${a.panelContent}${i?` ${i}`:""}`,style:t,children:n})},p.Item=function({children:t,style:n={},onClick:i=()=>{},className:l,activeWhenBlur:r=!0}){const[o,s]=React.useState(!1),c=React.useCallback((e=>{s(!0),e.stopPropagation()}),[]);return e.jsx("div",{className:`${a.panelItem}${l?` ${l}`:""} ${r&&o?a.active:""}`,style:n,onClick:i,onFocus:c,onBlur:()=>s(!1),children:t})};const x={preview:"_preview_qfaro_1",previewTopBox:"_previewTopBox_qfaro_13",stop:"_stop_qfaro_21",stopHandle:"_stopHandle_qfaro_27",active:"_active_qfaro_45",stopActive:"_stopActive_qfaro_60",top:"_top_qfaro_67",radioGroup:"_radioGroup_qfaro_74",stops:"_stops_qfaro_84",disabled:"_disabled_qfaro_90","gradient-preview":"_gradient-preview_qfaro_100",gradientPreview:"_gradient-preview_qfaro_100","gradient-panel__angle":"_gradient-panel__angle_qfaro_105",gradientPanelAngle:"_gradient-panel__angle_qfaro_105","overlay-when-drag":"_overlay-when-drag_qfaro_110",overlayWhenDrag:"_overlay-when-drag_qfaro_110","gradient-panel__angle__label":"_gradient-panel__angle__label_qfaro_119",gradientPanelAngleLabel:"_gradient-panel__angle__label_qfaro_119","gradient-panel__angle__picker":"_gradient-panel__angle__picker_qfaro_122",gradientPanelAnglePicker:"_gradient-panel__angle__picker_qfaro_122","gradient-panel__angle__input":"_gradient-panel__angle__input_qfaro_125",gradientPanelAngleInput:"_gradient-panel__angle__input_qfaro_125","gradient-panel__meta":"_gradient-panel__meta_qfaro_130",gradientPanelMeta:"_gradient-panel__meta_qfaro_130","gradient-panel__presets":"_gradient-panel__presets_qfaro_136",gradientPanelPresets:"_gradient-panel__presets_qfaro_136","gradient-panel__presets__label":"_gradient-panel__presets__label_qfaro_141",gradientPanelPresetsLabel:"_gradient-panel__presets__label_qfaro_141","gradient-panel__presets__item":"_gradient-panel__presets__item_qfaro_144",gradientPanelPresetsItem:"_gradient-panel__presets__item_qfaro_144","gradient-panel__slider":"_gradient-panel__slider_qfaro_154",gradientPanelSlider:"_gradient-panel__slider_qfaro_154","gradient-panel__slider-marker":"_gradient-panel__slider-marker_qfaro_164",gradientPanelSliderMarker:"_gradient-panel__slider-marker_qfaro_164","gradient-panel__slider-marker_active":"_gradient-panel__slider-marker_active_qfaro_175",gradientPanelSliderMarkerActive:"_gradient-panel__slider-marker_active_qfaro_175","gradient-panel__slider-marker__color":"_gradient-panel__slider-marker__color_qfaro_178",gradientPanelSliderMarkerColor:"_gradient-panel__slider-marker__color_qfaro_178","gradient-panel__color-item":"_gradient-panel__color-item_qfaro_188",gradientPanelColorItem:"_gradient-panel__color-item_qfaro_188","gradient-panel__color-item__info":"_gradient-panel__color-item__info_qfaro_196",gradientPanelColorItemInfo:"_gradient-panel__color-item__info_qfaro_196","gradient-panel__color-item__action":"_gradient-panel__color-item__action_qfaro_200",gradientPanelColorItemAction:"_gradient-panel__color-item__action_qfaro_200","gradient-panel__color-item__position":"_gradient-panel__color-item__position_qfaro_203",gradientPanelColorItemPosition:"_gradient-panel__color-item__position_qfaro_203","gradient-panel__color-item__position__unit":"_gradient-panel__color-item__position__unit_qfaro_207",gradientPanelColorItemPositionUnit:"_gradient-panel__color-item__position__unit_qfaro_207","gradient-panel__color-item__picker":"_gradient-panel__color-item__picker_qfaro_212",gradientPanelColorItemPicker:"_gradient-panel__color-item__picker_qfaro_212","gradient-panel__color-item__color-text":"_gradient-panel__color-item__color-text_qfaro_220",gradientPanelColorItemColorText:"_gradient-panel__color-item__color-text_qfaro_220","gradient-panel__color-item__btn":"_gradient-panel__color-item__btn_qfaro_226",gradientPanelColorItemBtn:"_gradient-panel__color-item__btn_qfaro_226","gradient-panel__color-item__btn-disabled":"_gradient-panel__color-item__btn-disabled_qfaro_231",gradientPanelColorItemBtnDisabled:"_gradient-panel__color-item__btn-disabled_qfaro_231","gradient-panel__divider":"_gradient-panel__divider_qfaro_235",gradientPanelDivider:"_gradient-panel__divider_qfaro_235"},w=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 32 32",children:e.jsx("path",{fill:"#000",fillOpacity:".9",fillRule:"evenodd",stroke:"none",d:"M15.5 15.5v-5h1v5h5v1h-5v5h-1v-5h-5v-1z"})}),C=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30",viewBox:"0 0 32 32",children:e.jsx("path",{fill:"#000",fillOpacity:".9",stroke:"none",d:"M21.5 16.5h-11v-1h11z"})}),b=()=>e.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4236",width:"15",height:"15",children:e.jsx("path",{d:"M512 838.624C263.52 838.624 61.344 692.096 61.344 512S263.52 185.376 512 185.376 962.656 331.904 962.656 512c0 180.064-202.176 326.624-450.656 326.624z m0-610.56C287.04 228.064 104 355.456 104 512S287.04 795.936 512 795.936c224.992 0 408-127.392 408-283.936S736.992 228.064 512 228.064z",fill:"currentColor","p-id":"4237"})}),R=()=>e.jsx("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4384",width:"15",height:"15",children:e.jsx("path",{d:"M512 998.4C243.776 998.4 25.6 780.224 25.6 512S243.776 25.6 512 25.6s486.4 218.176 486.4 486.4-218.176 486.4-486.4 486.4zM512 76.8C272 76.8 76.8 272 76.8 512s195.2 435.2 435.2 435.2 435.2-195.2 435.2-435.2S752 76.8 512 76.8z","p-id":"4385",fill:"currentColor"})}),k=()=>e.jsxs("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8034",width:"15",height:"15",children:[e.jsx("path",{d:"M515.57 978.4c-61.75 0-121.66-12.1-178.09-35.97C283 919.39 234.07 886.4 192.07 844.4c-42.01-42.01-74.99-90.93-98.03-145.41-23.87-56.43-35.97-116.34-35.97-178.09s12.1-121.66 35.97-178.09c23.04-54.48 56.03-103.41 98.03-145.41 42-42.01 90.93-74.99 145.41-98.03C393.9 75.5 453.82 63.4 515.57 63.4s121.66 12.1 178.09 35.97c54.48 23.04 103.41 56.03 145.41 98.03s74.99 90.93 98.03 145.41c23.86 56.42 35.97 116.34 35.97 178.09s-12.1 121.66-35.97 178.09c-23.04 54.48-56.03 103.41-98.03 145.41-42.01 42-90.93 74.99-145.41 98.03-56.43 23.86-116.34 35.97-178.09 35.97z m0-848.29c-52.77 0-103.94 10.33-152.1 30.7-46.53 19.68-88.33 47.86-124.23 83.76s-64.08 77.7-83.76 124.23c-20.37 48.16-30.7 99.33-30.7 152.1s10.33 103.94 30.7 152.1c19.68 46.53 47.86 88.32 83.76 124.22s77.7 64.08 124.23 83.76c48.16 20.37 99.33 30.7 152.1 30.7 52.77 0 103.94-10.33 152.1-30.7C714.2 861.3 756 833.12 791.9 797.22s64.08-77.7 83.76-124.23c20.37-48.16 30.7-99.33 30.7-152.1s-10.33-103.94-30.7-152.1c-19.68-46.53-47.86-88.33-83.76-124.23s-77.7-64.08-124.23-83.76c-48.16-20.36-99.33-30.69-152.1-30.69z",fill:"currentColor","p-id":"8035"}),e.jsx("path",{d:"M735.8 422.48c-12.09-28.6-29.4-54.27-51.45-76.31-22.04-22.04-47.72-39.35-76.31-51.45-29.62-12.53-61.07-18.88-93.47-18.88s-63.85 6.35-93.47 18.88c-28.6 12.1-54.27 29.4-76.31 51.45-22.04 22.04-39.35 47.72-51.45 76.31-12.53 29.62-18.88 61.07-18.88 93.47s6.35 63.85 18.88 93.47c12.09 28.59 29.4 54.27 51.45 76.31 22.04 22.04 47.72 39.35 76.31 51.45 29.62 12.53 61.07 18.88 93.47 18.88s63.85-6.35 93.47-18.88c28.59-12.09 54.27-29.4 76.31-51.45 22.04-22.04 39.35-47.72 51.45-76.31 12.53-29.62 18.88-61.07 18.88-93.47s-6.35-63.85-18.88-93.47z m-40.24 93.47c0 24.45-4.78 48.15-14.21 70.44-9.12 21.55-22.17 40.91-38.8 57.54-16.63 16.63-35.99 29.69-57.54 38.8-22.3 9.43-46 14.21-70.44 14.21-24.45 0-48.15-4.78-70.44-14.21-21.55-9.11-40.91-22.17-57.54-38.8-16.63-16.63-29.69-35.99-38.8-57.54-9.43-22.3-14.21-46-14.21-70.44 0-24.45 4.78-48.15 14.21-70.44 9.11-21.55 22.17-40.91 38.8-57.54s35.99-29.69 57.54-38.8c22.3-9.43 46-14.21 70.44-14.21 24.45 0 48.15 4.78 70.44 14.21 21.55 9.11 40.91 22.17 57.54 38.8 16.63 16.63 29.69 35.99 38.8 57.54 9.43 22.29 14.21 45.99 14.21 70.44z",fill:"currentColor","p-id":"8036",opacity:".6"})]}),y=()=>e.jsxs("svg",{viewBox:"0 0 1901 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11873",width:"15",height:"15",children:[e.jsx("path",{d:"M144.896 977.042286L52.370286 894.683429l380.342857-381.513143L57.417143 134.436571 143.36 47.689143l462.848 465.408-461.238857 463.945143z",fill:"currentColor","p-id":"11874"}),e.jsx("path",{d:"M787.382857 987.428571L694.857143 905.069714l380.342857-381.513143L699.830857 144.822857 785.700571 58.075429l462.921143 465.408-461.238857 463.945142z",fill:"currentColor",opacity:".6","p-id":"11875"}),e.jsx("path",{d:"M1372.525714 987.428571L1280 905.069714l380.342857-381.513143-375.369143-378.733714L1370.843429 58.075429l462.921142 465.408-461.238857 463.945142z",fill:"currentColor",opacity:".3","p-id":"11876"})]}),j=()=>e.jsx("div",{style:{marginRight:10},children:e.jsx("svg",{viewBox:"0 0 1025 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13019",width:"15",height:"15",children:e.jsx("path",{d:"M993.6 856h-208l17.6-22.4 30.4-38.4 3.2-3.2 64-81.6-104 8h-6.4c-33.6-179.2-129.6-331.2-259.2-425.6l156.8-200c11.2-11.2 11.2-30.4 0-41.6-11.2-11.2-30.4-11.2-41.6 0l-164.8 211.2-36.8 46.4-435.2 556.8c-11.2 11.2-11.2 30.4 0 41.6 6.4 6.4 14.4 9.6 24 8h961.6c16 0 30.4-12.8 30.4-30.4-3.2-16-16-28.8-32-28.8z m-249.6 0h-654.4l404.8-516.8c116.8 83.2 204.8 220.8 236.8 384l-76.8 6.4-17.6 1.6 19.2 19.2 44.8 41.6 14.4 12.8 28.8 25.6 27.2 25.6h-27.2z",fill:"currentColor","p-id":"13020"})})});function A(e="u_"){return e+Date.now().toString(36)+Math.floor(1e4*Math.random()).toString(36)}A(),A();const S=[{value:"linear",label:"线性"},{value:"radial",label:"径向"}],q=[{value:"ellipse",label:"椭圆"},{value:"circle",label:"圆形"}];function I(e,n,i){const{color:l,position:a}=e,{color:r,position:o}=n;if(!l||!r)return"rgba(255,255,255,1)";const s=t(l).color,c=t(r).color,d=(i-a)/(o-a),_=s[0]+(c[0]-s[0])*d,u=s[1]+(c[1]-s[1])*d,p=s[2]+(c[2]-s[2])*d;return t({r:_,g:u,b:p}).toString()}function N(e){const t=[],n=e.split(", ");let i=0;for(let l=0;l<n.length;l++){const e=n[l].trim().match(/(.*)\s+(\d+)?%/);if(e){const n=e[1],l=e[2]?parseInt(e[2],10):i;t.push({color:n,position:l,id:A()}),i=l}}return t}const $=e=>Math.round(Math.min(Math.max(e,0),100));function P({gradientColor:t,stops:n,setStops:i,curElementId:l,setCurElementId:a}){const[r,o]=React.useState(!1),[s,c]=React.useState(0),[d,_]=React.useState(0),[u,p]=React.useState(-1),g=React.useRef(null),f=React.useCallback((e=>{e=$(e);const t=[...n],l=t.findIndex((t=>t.position>e)),a=l>0?t[l-1]:t[0],r=-1!==l?t[l]:t[t.length-1],o={id:A(),position:e,color:e<=a.position?a.color:e>=r.position?r.color:I(a,r,e)};t.splice(-1===l?t.length:l,0,o),i(t)}),[n]),h=React.useCallback(((e,t)=>{var i,l;const r=null==(i=g.current)?void 0:i.getBoundingClientRect();if(r){const i=(t.clientX-r.left)/r.width*100;a(e),o(!0),c(i);const s=[...n];_((null==(l=s.find((t=>t.id===e)))?void 0:l.position)||0)}}),[n]),m=React.useCallback((e=>{var t;if(!r)return;const a=null==(t=g.current)?void 0:t.getBoundingClientRect();if(a){const t=(e.clientX-a.left)/a.width*100;(e=>{const t=n,a=t.findIndex((e=>e.id===l));t[a].position=$(e),t.sort(((e,t)=>e.position-t.position)),i([...t])})(d+(t-s))}}),[r,d,s,g.current]),v=e=>{o(!1),p(+new Date),a(null),e.stopPropagation()};return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:x["overlay-when-drag"],onMouseMove:m,onMouseUp:v}),e.jsx("div",{className:x["gradient-panel__slider"],style:{background:t},onClick:e=>{if(u>-1&&+new Date-u<10)return;const t=e.currentTarget.getBoundingClientRect(),n=(e.clientX-t.left)/t.width*100;f(n)},ref:g,children:n.map((({position:t,color:n,id:i},a)=>e.jsx("div",{style:{left:`${t}%`,zIndex:i===l?20:1},onMouseDown:e=>h(i,e),onMouseUp:v,onClick:e=>e.stopPropagation(),className:`${x["gradient-panel__slider-marker"]} ${i===l?x["gradient-panel__slider-marker_active"]:""}`,children:e.jsx("div",{id:n,style:{backgroundColor:n},className:`${x["gradient-panel__slider-marker__color"]}`})},`${i}-${a}`)))})]})}const E=({gradientColor:t,stops:n,setStops:i,curElementId:l,setCurElementId:a})=>{const[r,o]=React.useState(!1),[s,c]=React.useState(0),[d,_]=React.useState(0),[u,p]=React.useState(-1),g=React.useRef(null),f=React.useCallback((e=>{e=$(e);const t=[...n],l=t.findIndex((t=>t.position>e)),a=l>0?t[l-1]:t[0],r=-1!==l?t[l]:t[t.length-1],o={id:A(),position:e,color:e<=a.position?a.color:e>=r.position?r.color:I(a,r,e)};t.splice(-1===l?t.length:l,0,o),i(t)}),[n]),h=React.useCallback(((e,t)=>{var i,l;const r=null==(i=g.current)?void 0:i.getBoundingClientRect();if(r){const i=(t.clientX-r.left)/r.width*100;a(e),o(!0),c(i);const s=[...n];_((null==(l=s.find((t=>t.id===e)))?void 0:l.position)||0)}}),[n,g.current]),m=React.useCallback((e=>{var t;if(!r)return;const a=null==(t=g.current)?void 0:t.getBoundingClientRect();if(a){const t=(e.clientX-a.left)/a.width*100;(e=>{const t=n,a=t.findIndex((e=>e.id===l));t[a].position=$(e),t.sort(((e,t)=>e.position-t.position)),i([...t])})(d+(t-s))}}),[r,d,s,g.current]),v=e=>{o(!1),p(+new Date),a(null),e.stopPropagation()};return e.jsxs("div",{style:{position:"relative",left:"-12px"},children:[r&&e.jsx("div",{className:x["overlay-when-drag"],onMouseMove:m,onMouseUp:v}),e.jsx("div",{className:x.previewTopBox,children:n.map(((t,n)=>{const{position:i,color:a,id:r}=t;return e.jsx("div",{className:`${x.stop} ${r===l?x.stopActive:""}`,style:{left:`${i}%`,zIndex:r===l?20:3},onMouseDown:e=>h(r,e),onMouseUp:v,onClick:e=>e.stopPropagation(),children:e.jsx("div",{className:`${x.stopHandle} ${r===l?x.active:""}`,children:e.jsx("div",{style:{backgroundColor:a}})},r)},`${r}-${n}`)}))}),e.jsx("div",{className:x.preview,style:{backgroundImage:t},onClick:e=>{if(u>-1&&+new Date-u<10)return;const t=e.currentTarget.getBoundingClientRect(),n=(e.clientX-t.left)/t.width*100;f(n)},ref:g})]})};function M({defaultValue:t,onChange:n}){const[i,l]=React.useState("linear"),[a,r]=React.useState("ellipse"),[s,c]=React.useState(90),[d,_]=React.useState([]);React.useEffect((()=>{if(t){const{type:e,direction:n,stops:i}=function(e){let t,n;if(t=e.match(/(\d+deg),\s*(.+)/),t)return{type:"linear",direction:t[1].trim(),stops:N(t[2].trim())};if(t=e.match(/radial-gradient\(([^)]+)\)\s*,?\s*(.*)/),t){const i=t[1].split(", ");return n=i[0],{type:"radial",direction:n,stops:N(e=i[1]+") "+t[2])}}return{type:"linear",stops:[]}}(t);l(e),"linear"===e&&n?c(parseInt(n)):n&&r(n),i.length>0&&_(g(i))}}),[t]);const u=e=>{_(g(e))},g=React.useCallback((e=>e.sort(((e,t)=>(e.position||0)-(t.position||0)))),[]),f=React.useCallback((()=>{const{color:e="rgba(255,255,255,1)",position:t=50}=d[d.length-1]||{};u([...d,{color:e,position:t+10<=100?t+10:100,id:A()}])}),[d]),v=React.useCallback((e=>{u(d.filter((({id:t})=>e!==t)))}),[d]),I=(e,t,n,i)=>{const l="linear"===t?`${e}deg`:n;return 0===i.length?"":`${t}-gradient(${l}${i.map((e=>`, ${e.color} ${e.position}%`)).join("")})`},$=I(s,i,a,d),M=I(90,"linear",a,d);React.useEffect((()=>{$&&(null==n||n($))}),[$,n]);const B=React.useCallback(((e,t,n,i=!1)=>{_((l=>{const a=l.map(((i,l)=>i.id===n?{...i,[e]:t}:i));return i?g(a):a}))}),[n,$,d]),[F,L]=React.useState(null);return e.jsxs("div",{style:{width:"320px",marginTop:6},children:[e.jsx(P,{gradientColor:M,stops:d,setStops:u,curElementId:F,setCurElementId:L}),e.jsx("div",{style:{marginTop:60}}),e.jsx(E,{gradientColor:M,stops:d,setStops:u,curElementId:F,setCurElementId:L}),e.jsxs("div",{className:x.top,children:[e.jsx(h,{tip:"渐变类型",style:{flex:1},value:i,options:S,prefix:"radial"===i?e.jsx(k,{}):e.jsx(y,{}),onChange:e=>l(e)}),"linear"===i?e.jsx(m,{tip:"渐变线方向角度",prefix:e.jsx(j,{}),prefixTip:"角度",style:{flex:1},type:"number",defaultUnitValue:"",defaultValue:s,onChange:e=>c(parseInt(e))}):e.jsx(h,{tip:"辐射形状",style:{flex:1},value:a,options:q,prefix:"ellipse"===a?e.jsx(b,{}):e.jsx(R,{}),onChange:e=>r(e)}),e.jsx(p.Item,{style:{width:30,padding:0},onClick:f,children:e.jsx(w,{})})]}),e.jsx("div",{className:x.stops,children:(null==d?void 0:d.length)>0&&d.map((t=>{const{color:n,position:i,id:l}=t;return n?e.jsxs(p.Content,{style:{padding:"3px 0",display:"flex",alignItems:"center"},children:[e.jsx(o,{value:n,style:{flex:3},onChange:e=>{B("color",e,l),L(l)}}),e.jsx(m,{tip:"停靠位置",style:{flex:3},type:"number",defaultUnitValue:"",defaultValue:i,onChange:e=>{let t=Number(e);t=t>100?100:t,B("position",t,l,!0),L(l)}},i),e.jsx(p.Item,{style:{width:30,padding:0},className:d.length<=2?x.disabled:"",onClick:()=>{d.length>2&&v(l)},children:e.jsx(C,{})})]},l):null}))})]})}const B=()=>{const[t,n]=React.useState("radial-gradient(circle, rgb(250,84,28) 0%, rgb(54,207,201) 25%, rgb(255,255,255) 50%, rgb(235,47,150) 75%)");return e.jsxs("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 100px"},children:[e.jsx("div",{style:{backgroundImage:t,height:800,width:"100%",marginRight:100}}),e.jsx(M,{defaultValue:t,onChange:e=>n(e)})]})},F=document.getElementById("root");if(F){ReactDOM.createRoot(F).render(e.jsx(React.StrictMode,{children:e.jsx(B,{})}))}
